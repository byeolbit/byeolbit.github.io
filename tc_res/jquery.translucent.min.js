/* 
 * jQuery translucent 1.0.8
 * Copyright (c) 2017, Sanggyeong Jo
 * Lisensed under the MIT
 * 
 * Dependencies:
 *  jQuery >= 1.6
 * 
 * Contacts
 *  Github : github.com/byeolbit
 *  Email : info@byeolbit.com
 *          sanggyeong.jo@gmail.com
 *
 * You can find this project at https://github.com/byeolbit/translucent.js
 */
!function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery"),window,document):a(jQuery,window,document)}(function(a,b,c,d){function g(b,c,d){this.element=b,this.bgElement=c,this.options=a.extend({},f,d),this._defaults=f,this._name=e,this.init()}var e="translucent",f={filterValue:10,cardColor:"white",shadow:!0};a.extend(g.prototype,{init:function(){var c=this;c.$element=a(c.element),c.$bgElement=a(c.bgElement),a.extend(this,c.initStructure(c.$element)),c.styleInit(c.$element,c.$cardContents,c.$cardContainer,c.options.shadow,c.options.cardColor),a(b).resize(function(){c.cardBgInit(c.$element,c.$bgElement,c.cardBgStyle,c.options.filterValue)}),a(b).bind("load",function(){a.each(c.$element,function(){c.cardBgInit(c.$element,c.$bgElement,c.cardBgStyle,c.options.filterValue)})}),c.observeBackgroundChange(),c.observeStyleChange()},initStructure:function(b){var c=b.find(".tl-card-contents").detach(),d=a('<div class = "tl-card-bg-container"></div>').appendTo(b),e=a('<div class = "tl-card-bg"></div>').appendTo(d)[0].style,f=a('<div class = "tl-card-container"></div>').appendTo(b);return c.appendTo(f),{$cardContents:c,$cardBgContainer:d,cardBgStyle:e,$cardContainer:f}},styleInit:function(b,d,e,f,g){switch(f&&e.css("box-shadow","0px 20px 20px rgba(0,0,0,0.5)"),b.children().each(function(){a(this).css({height:b.height(),width:b.width()})}),g){case"clear":g="rgba(255,255,255,0)";break;case"white":g="rgba(255,255,255,0.4)";break;case"grey":g="rgba(120,120,120,0.4)";break;case"black":g="rgba(30,30,30,0.7)"}if(d.css("background-color",g),e.position({my:"center",at:"center",of:b}),!c.getElementById("tl-Card-css")){var h='<style type="text/css" id="tl-Card-css">.tl-card-container {border: rgba(200,200,200,0.5) solid 1px;border-radius: 10px; overflow: hidden;position: relative; transition: box-shadow 0.4s ease;} .tl-card-bg-container {border-radius: 10px;overflow: hidden; position: relative;} .tl-card-contents {overflow: hidden;position: relative; border-radiu: 10px;}</style>';a(h).appendTo("head")}},cardBgInit:function(a,b,c,d){function m(a){a=a.slice(4,-1).replace(/"/g,""),a="."+a.substring(a.lastIndexOf("/"),a.length);var b=new Image;return b.src=a,{width:b.naturalWidth,height:b.naturalHeight}}var e=b.css("background-image"),f=b.css("background-repeat"),g=b.css("background-size"),h=a.height(),i=a.width();if(c.cssText="background-image: "+e+"; background-repeat: "+f+"; filter: blur("+d+"px); margin-left: -"+d+"px; margin-top: -"+d+"px; height: "+(h+2*d)+"px; width: "+(i+2*d)+"px;","cover"==g){var j=m(e),k=b.height(),l=j.width*(k/j.height);c.backgroundSize=l+"px "+k+"px"}else if(g.indexOf("%")!=-1){var j=m(e),l=b.width();k=j.height*(l/j.width),c.backgroundSize=l+"px "+k+"px"}else c.backgroundSize=g;this.applyTransparent(a,b,c,d)},applyTransparent:function(a,b,c,d){var e=b.css("backgroundAttachment"),f=b.offset(),g=a.offset();c.backgroundAttachment=e,"fixed"!=e&&(c.backgroundPosition=f.left-(g.left-d)+"px "+(f.top-(g.top-d))+"px")},observeBackgroundChange:function(){var a=this,b=a.$bgElement[0],c=new MutationObserver(function(b){b.forEach(function(b){a.cardBgInit(a.$element,a.$bgElement,a.cardBgStyle,a.options.filterValue)})}),d={attributes:!0,attributeFilter:["style"]};c.observe(b,d)},observeStyleChange:function(){var a=this,b=a.element,c=a.$element.offset(),d=a.$element.height(),e=a.$element.width(),f=new MutationObserver(function(b){b.forEach(function(b){c!==a.$element.offset()&&(c=a.$element.offset(),a.applyTransparent(a.$element,a.$bgElement,a.cardBgStyle,a.options.filterValue));var f=a.$element.height(),g=a.$element.width();d!=f&&e!=g||(d=f,e=g,a.cardBgInit(a.$element,a.$bgElement,a.cardBgStyle,a.options.filterValue))})}),g={attributes:!0,childList:!0,characterData:!0,attributeFilter:["style"]};f.observe(b,g)},getOffset:function(a){return a.offset().left+" "+a.offset().top}}),a.fn[e]=function(b,c){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new g(this,b,c))})}});